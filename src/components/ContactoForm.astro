---
// src/components/ContactoForm.astro
---
<form id="contactForm">
  <input type="text" id="nombre" placeholder="Nombre">
  <button type="submit" id="btnEnviar">Enviar</button>
  <div class="msgF"></div>
</form>

<script>
  const form = document.getElementById('contactForm');
  const msgF = document.querySelector('.msgF');
  const btnEnviar = document.getElementById('btnEnviar');

  form.addEventListener('submit', function(e) {
      e.preventDefault(); // Prevenimos el envío tradicional

      // La validación se puede hacer de forma similar, pero con Vanilla JS
      const nombreInput = document.getElementById('nombre');
      if (nombreInput.value === '') {
          nombreInput.focus();
          nombreInput.style.borderColor = 'red';
          return; // Detiene la ejecución
      }
      // ... (añade las otras validaciones) ...

      const formData = new FormData(form);
      const originalBtnText = btnEnviar.textContent;
      btnEnviar.textContent = 'Enviando...';
      btnEnviar.disabled = true;

      fetch('URL_DE_TU_PHP/procesar.php', { // <-- ¡IMPORTANTE! Usa la URL completa a tu script PHP
          method: 'POST',
          body: formData
      })
      .then(response => {
          if (!response.ok) {
              // Si el servidor responde con un error (ej. 404, 500)
              throw new Error('Error en la respuesta del servidor');
          }
          return response.text(); // O .json() si tu PHP devolviera JSON
      })
      .then(data => {
          // Éxito
          form.reset(); // Limpia el formulario
          msgF.textContent = 'Mensaje enviado';
          msgF.style.backgroundColor = '#191919';
          msgF.style.padding = '0.5rem';
          setTimeout(() => { msgF.textContent = ''; }, 3000);
      })
      .catch(error => {
          // Error
          msgF.textContent = 'Hubo un error al enviar el mensaje.';
          console.error('Error:', error);
      })
      .finally(() => {
          // Esto se ejecuta siempre, al final
          btnEnviar.textContent = originalBtnText;
          btnEnviar.disabled = false;
      });
  });
</script>